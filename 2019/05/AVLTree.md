---
title: è‡ªå¹³è¡¡äºŒå‰æŸ¥æ‰¾æ ‘ -- AVLæ ‘ Adelson-Velsky-Landis Tree
date: 2019-05-08 18:24:59
tags: Algorithm DataStructure
---

## å¹³è¡¡è¿˜æ˜¯ä¸å¹³è¡¡ï¼Œè¿™æ˜¯ä¸€ä¸ªé—®é¢˜
ğŸ˜³ï¼šå¹³è¡¡å¥½ä¸å¥½å‘¢ï¼Ÿ
ğŸ¤£ï¼šæˆ‘è¯´å®ƒå¥½ã€‚
ğŸ˜³ï¼šå¥½åœ¨å“ªé‡Œå‘¢ï¼Ÿ
ğŸ¤£ï¼šæˆ‘åªèƒ½å‘Šè¯‰ä½ æ— å¯å¥‰å‘Šã€‚

ä»¥ä¸Šçš„å¯¹è¯æ˜¯å¤§å¤šæ•°äººçš„ååº”ï¼Œå¯¹äºæ•°æ®ç»“æ„ä¸­çš„æ ‘å½¢ç»“æ„ä¸ºä»€ä¹ˆå¹³è¡¡ä¼šæ¯”è¾ƒå¥½ä¸æ±‚ç”šè§£ã€‚åªæ˜¯å¤§æ¦‚ä¼šæ¯”ä¸å¹³è¡¡å¥½å§ï¼Œæ¯•ç«Ÿä¸‡ç‰©éƒ½æ˜¯è¿½æ±‚å’Œè°çš„ã€‚

æ ‘å½¢ç»“æ„çš„å¹³è¡¡å¥½ä¸å¥½ï¼Ÿå½“ç„¶å¥½äº†ï¼Œè¿™å°±æ˜¯äº§ç”Ÿæ ‘çš„åŸºæœ¬æ€æƒ³å•Šï¼Œå› ä¸ºæç«¯çš„ä¸å¹³è¡¡å°±æ˜¯çº¿æ€§è¡¨å•Šã€‚

æ‰€è°“æ ‘å½¢ç»“æ„çš„å¹³è¡¡æ€§ï¼Œå°±æ˜¯æŒ‡å°½é‡ä½¿æ ‘ä¸­çš„èŠ‚ç‚¹çš„å­æ ‘çš„æ·±åº¦éƒ½å¤§è‡´ç›¸åŒï¼Œæœ€ç†æƒ³çš„æƒ…å†µå°±æ˜¯ç±»ä¼¼äºå®Œå…¨äºŒå‰æ ‘é‚£æ ·çš„å½¢çŠ¶ã€‚
![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/20190508150412872.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1NoaWluYV9PcmV6,size_16,color_FFFFFF,t_70)
å¹³è¡¡å¸¦æ¥çš„å¥½å¤„æœ‰ä»€ä¹ˆå‘¢ï¼Ÿ
ğŸ¤£æ“ä½œæ—¶é—´å¤æ‚åº¦ä½ï¼Œè¯¸å¦‚æŸ¥è¯¢ï¼Œæ’å…¥ï¼Œåˆ é™¤ç­‰ç­‰curd
ğŸ¤£å¥½åƒæ²¡äº†ï¼Œä½†æ˜¯æ•°æ®ç»“æ„ä¸å°±æ˜¯æœ€åœ¨æ„è¿™ä¸ªå—

-----

## ä»€ä¹ˆæ˜¯äºŒå‰æŸ¥æ‰¾æ ‘ï¼Ÿ
è¿™ä¸€èŠ‚å¤§æ¦‚è®²çš„éƒ½æ˜¯åºŸè¯ã€‚ã€‚ä¸€èˆ¬æ¥çœ‹è¿™ä¸ªæ–‡ç« çš„åº”è¯¥éƒ½çŸ¥é“äºŒå‰æŸ¥æ‰¾æ ‘æ˜¯ä»€ä¹ˆå§ã€‚ã€‚

Binary Search Treeï¼ŒBSTå°±æ˜¯äºŒå‰æŸ¥æ‰¾æ ‘ï¼Œéµå¾ªæœ€åŸºæœ¬çš„â€œæŸ¥æ‰¾æ ‘â€çš„æ€§è´¨ï¼š

+ å¯¹äºæ ‘ä¸­çš„ä»»æ„ä¸€ä¸ªèŠ‚ç‚¹ï¼š
	+ å¦‚æœè¿™ä¸ªèŠ‚ç‚¹çš„å·¦å­æ ‘ä¸ä¸ºç©ºï¼Œåˆ™å·¦å­æ ‘ä¸Šçš„æ‰€æœ‰èŠ‚ç‚¹éƒ½å°äºè¯¥èŠ‚ç‚¹çš„å€¼
	+ å¦‚æœè¿™ä¸ªèŠ‚ç‚¹çš„å³å­æ ‘ä¸ä¸ºç©ºï¼Œåˆ™å³å­æ ‘ä¸Šçš„æ‰€æœ‰èŠ‚ç‚¹éƒ½å°äºè¯¥èŠ‚ç‚¹çš„å€¼

ä¹Ÿå°±æ˜¯ï¼š[å·¦å­æ ‘çš„æ‰€æœ‰çš„èŠ‚ç‚¹] è¯¥èŠ‚ç‚¹ [å³å­æ ‘çš„æ‰€æœ‰çš„èŠ‚ç‚¹]
æ˜¯ä¸æ˜¯é•¿çš„å’Œ**å¿«é€Ÿæ’åº**æœ‰ç‚¹åƒï¼Ÿ

å°±æ˜¯å› ä¸ºç»´æŒäº†è¿™æ ·çš„æ€§è´¨ï¼Œè¾¾åˆ°äº†å¾ˆå¥½çš„æ•ˆæœï¼š
+ æ‰€æœ‰çš„æ•°æ®æ˜¯æœ‰åºçš„
+ æŸ¥æ‰¾æ•°æ®çš„æ—¶é—´å’ŒäºŒåˆ†æŸ¥æ‰¾å‡ ä¹ç­‰åŒï¼ˆå¹³è¡¡æ—¶ç›¸ç­‰ï¼‰

### ä¸ºä»€ä¹ˆè¯´å¹³è¡¡æ—¶ç›¸ç­‰ï¼Ÿ
è€ƒè™‘æœ€æç«¯çš„æƒ…å†µå˜›ã€‚ã€‚å°±æ˜¯ä¸€ä¸ªé“¾æ¡ï¼Œè¿™æ ·çš„æ—¶é—´å¤æ‚åº¦å°±æ˜¯O(N)äº†

-----
## å¦‚ä½•è¾¾åˆ°è‡ªå¹³è¡¡çš„æ•ˆæœï¼Ÿ
AVLæ ‘ä¸­å¼•å…¥äº†å¹³è¡¡å› å­çš„æ¦‚å¿µï¼š

	å¹³è¡¡å› å­ï¼šæŸä¸ªç»“ç‚¹çš„å·¦å­æ ‘çš„é«˜åº¦å‡å»å³å­æ ‘çš„é«˜åº¦å¾—åˆ°çš„å·®å€¼ã€‚

ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸€ä¸ªå¹³è¡¡çš„æ ‘å°±æ˜¯æ‰€æœ‰çš„èŠ‚ç‚¹çš„å¹³è¡¡å› å­çš„ç»å¯¹å€¼éƒ½æ˜¯å°äºç­‰äº1çš„ã€‚

ğŸŒ› ğŸŒœï¼šçˆ±çš„é­”åŠ›è½¬åœˆåœˆï½

**æ—‹è½¬**ï¼Œé€šè¿‡æ—‹è½¬æ¥è¾¾åˆ°è‡ªå¹³è¡¡ã€‚

é—®é¢˜æ¥äº†ï¼Œç°åœ¨ç›¸ä¿¡å¤§å®¶å¯¹äºæ—‹è½¬æ˜¯ä¸ªä»€ä¹ˆé¬¼ä¸œè¥¿å¾ˆç–‘æƒ‘

### ä»€ä¹ˆæ˜¯æ—‹è½¬ï¼Ÿ
æˆ‘ä»¬å‡è®¾æˆ‘ä»¬æœ‰ä¸€æ£µå¹³è¡¡çš„æ ‘ï¼Œç„¶åæˆ‘ä»¬æŒ‰ç…§äºŒå‰æœç´¢æ ‘çš„åŸåˆ™è¿›è¡Œæ’å…¥ï¼šæˆ‘ä»¬å¤§æ¦‚ç‡ä¼šç ´åè¿™æ£µæ ‘çš„å¹³è¡¡æ€§ã€‚
æœ€å¸¸è§çš„ä¸€ç§æƒ…å†µä¾¿æ˜¯ï¼š

```
                ğŸ¤£                                    ğŸ¤£
               /                ---- >               /  
             ğŸ˜œ                                    ğŸ˜œ
                                                  /
                                                ğŸ™„
```
è¿™ç®€ç›´å¤ªç³Ÿç³•äº†ï¼Œè¿™æ ·ä¸‹å»æˆ‘ä»¬çš„å¯çˆ±çš„BSTå°±è¦å˜æˆé“¾è¡¨äº†ï¼
æˆ‘ä»¬ä¸èƒ½æ”¾çºµæˆ‘ä»¬çš„å¯çˆ±çš„BSTï¼Œä¸èƒ½è®©å®ƒéšæ„ç”Ÿé•¿ï¼Œå› æ­¤æˆ‘ä»¬è¦ï¼šæ—‹è½¬ã€‚

åœ¨è¿™é‡Œæˆ‘ä»¬å¯ä»¥çœ‹å‡º ğŸ¤£ > ğŸ˜œ > ğŸ™„ï¼Œè€Œè¿™ç§æƒ…å†µä¸‹ğŸ˜œä½œä¸ºæ ¹èŠ‚ç‚¹ï¼ˆçˆ¶èŠ‚ç‚¹ï¼‰æ‰æ˜¯æœ€ä¼˜çš„é€‰æ‹©ã€‚
å› æ­¤æˆ‘ä»¬å°±æ—‹è½¬ä¸€ä¸‹ï¼š
```
                ğŸ¤£                                    ğŸ˜œ
               /                ---- >               /  \
             ğŸ˜œ                                    ğŸ™„    ğŸ¤£
            /
          ğŸ™„
```

è¿™ç§æƒ…å†µç§°ä¹‹ä¸ºå·¦å·¦æƒ…å†µï¼šåœ¨æœ¬æ¥æ ‘å‘å·¦å€¾æ–œçš„æƒ…å†µä¸‹åˆåœ¨å·¦å­æ ‘å¢åŠ å…ƒç´ ã€‚è¿›è¡Œå³æ—‹ã€‚
ç›¸åŒçš„ï¼šå³å³æƒ…å†µè¿›è¡Œå·¦æ—‹ã€‚
å·¦å³æƒ…å†µï¼šå…ˆå·¦æ—‹åå³æ—‹ã€‚
å³å·¦æƒ…å†µï¼šå…ˆå³æ—‹åå·¦æ—‹ã€‚

## å¦‚ä½•å®ç°ï¼Ÿ
### èŠ‚ç‚¹ - Node
ä¸€ä¸ªèŠ‚ç‚¹åº”è¯¥æ‹¥æœ‰å“ªäº›å±æ€§å‘¢ï¼Ÿ

ğŸ¤·â€â™‚ï¸è‚¯å®šè¦æœ‰å·¦å³å­èŠ‚ç‚¹çš„æŒ‡é’ˆå§ï¼
ğŸ¤·â€â™‚ï¸è¦æœ‰å¹³è¡¡å› å­ï¼Œå—¯ï¼Œè¿™æ ·æ‰çŸ¥é“ä»€ä¹ˆæ—¶å€™åº”è¯¥æ—‹è½¬ã€‚
ğŸ¤·â€â™‚ï¸ä¸ºäº†æ–¹ä¾¿è®¡ç®—å¹³è¡¡å› å­ï¼Œåº”è¯¥ç¼“å­˜ä¸€ä¸‹é«˜åº¦ã€‚
```go
type Node struct {
    Data    int
    Height  int
    Left    *Node;
    Right   *Node;
}
```

### é€’å½’è®¡ç®—èŠ‚ç‚¹çš„é«˜åº¦

```go
func (root *Node)TreeHeight() int {
    if root == nil {
        return 0
    }
    return max(root.Left.TreeHeight(), root.Roght.TreeHeight()) + 1
}
```

### è®¡ç®—å¹³è¡¡å› å­

```go
func (root *Node)TreeGetBalanceFactor() int {
    if root == nil {
        return 0
    }
    return root.Left.Height - root.Right.Height
}
```

### å³æ—‹

```go
func (root *Node)TreeRotateRight() *Node {
    left := root.Left
    
    root.Left = Left.Right // å°†å°†è¦è¢«æŠ›å¼ƒçš„èŠ‚ç‚¹è¿æ¥ä¸ºæ—‹è½¬åçš„ root çš„å·¦å­©å­
    left.Right = root      // è°ƒæ¢çˆ¶å­å…³ç³»

    left.Height = max(left.Left.TreeHeight(), left.Right.TreeHeight())+1
    root.Right.Height = max(root.Right.Left.TreeHeight(), root.Right.Right.TreeHeight())+1
    return left
}
```

### å·¦æ—‹

```go
func (root *Node)TreeRotateLeft() *Node {
    right := root.Right

    root.Right = right.Left
    right.Left = root

    root.Left.Height = max(root.Left.Left.TreeHeight(), root.Left.Right.TreeHeight())+1
    right.Height = max(right.Left.TreeHeight(), right.Left.TreeHeight())+1
    return right
}
```

ææ‡‚äº†å—ï¼Ÿ ğŸ¤·ğŸ»â€â™‚ï¸ğŸ¤·ğŸ»â€â™€ï¸ ğŸ¤·ğŸ»â€â™‚ï¸ğŸ¤·ğŸ»â€â™€ï¸ ğŸ¤·ğŸ»â€â™‚ï¸ğŸ¤·ğŸ»â€â™€ï¸ ğŸ¤·ğŸ»â€â™‚ï¸ğŸ¤·ğŸ»â€â™€ï¸ ğŸ¤·ğŸ»â€â™‚ï¸ğŸ¤·ğŸ»â€â™€ï¸ ğŸ¤·ğŸ»â€â™‚ï¸
--------
